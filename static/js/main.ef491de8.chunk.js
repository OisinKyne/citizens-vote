(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{207:function(e){e.exports={main:{id:1,address:"0xaa8a2ceb04f4ea6fbf9afc6bc542cc432cef88d3"},rinkeby:{id:4,address:"0xc9f0ceebfa12ec7828245375cfb634bd387bbee7"},private:{id:99999,address:"0x0000000000000000000000000000000000000000"}}},348:function(e,t,a){e.exports=a.p+"static/media/ethereum-metamask-chrome.79226bac.png"},350:function(e){e.exports=[{constant:!1,inputs:[{name:"billUri",type:"string"},{name:"inFavour",type:"bool"}],name:"vote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"from",type:"address"},{indexed:!1,name:"inFavour",type:"bool"},{indexed:!1,name:"billUri",type:"string"}],name:"Vote",type:"event"}]},359:function(e,t,a){e.exports=a(808)},364:function(e,t,a){},406:function(e,t){},408:function(e,t){},440:function(e,t){},442:function(e,t){},507:function(e,t){},508:function(e,t){},563:function(e,t){},808:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(35),i=a.n(o),c=(a(364),a(25)),l=a.n(c),s=a(73),u=a(50),m=a(36),h=a(29),d=a(44),p=a(42),b=a(43),f=a(352),v=a(351),g=a(841),w=a(155),E=a.n(w),y=a(156),O=a.n(y),k=a(843),j=Object(v.a)({palette:{primary:{light:E.a[500],main:E.a[700],dark:E.a[900]},secondary:{light:O.a[300],main:O.a[500],dark:O.a[700]}},typography:{useNextVariants:!0}});var C=function(e){return function(t){return r.a.createElement(g.a,{theme:j},r.a.createElement(k.a,null),r.a.createElement(e,t))}},x=a(827),V=a(348),N=a.n(V),B=a(76);var M=Object(B.createLogger)({level:"info",format:B.format.combine(B.format.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),B.format.splat(),B.format.json()),defaultMeta:{service:"citizens-vote-ui"},transports:[new B.transports.Console({format:B.format.simple(),level:"warn"})]}),T=C(function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={open:!0},!0===e.web3Injected&&(M.info("Web3 is injected into this Onboarding object."),a.state={open:!1}),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return!1===this.state.open?null:r.a.createElement("div",{className:"onboardingDiv"},r.a.createElement(x.a,{container:!0,direction:"column",spacing:3,alignContent:"center",alignItems:"center"},r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement("a",{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer",className:"metaMaskUrl"},r.a.createElement("img",{src:N.a,className:"fullWidthImage",alt:"MetaMask Fox Logo"}))),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"body1",gutterBottom:!0},"You need to install"," ",r.a.createElement("a",{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer",className:"metaMaskUrl"},"MetaMask")," ","to post messages to the Ethereum blockchain."))))}}]),t}(r.a.Component)),F=a(828),I=a(829),S=a(830),W=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"startCastVoteFor",value:function(e){this.props.triggerVoteCast(this.props.bill,!0)}},{key:"startCastVoteAgainst",value:function(e){this.props.triggerVoteCast(this.props.bill,!1)}},{key:"render",value:function(){var e="/";return this.props.bill.versions&&this.props.bill.versions.length>=1&&(e=this.props.bill.versions[0].version.formats.pdf.uri),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(F.a,{className:"billPaper"},r.a.createElement(x.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(x.a,{item:!0,xs:10},r.a.createElement(f.a,{variant:"h6",gutterBottom:!0},this.props.bill.shortTitleEn),r.a.createElement(f.a,{variant:"body1",gutterBottom:!0},this.props.bill.longTitleEn),r.a.createElement(f.a,{variant:"body1"},r.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"billPdfUrl"},"Read Bill"))),r.a.createElement(x.a,{item:!0,xs:2},r.a.createElement(x.a,{container:!0,justify:"space-around",alignItems:"center"},r.a.createElement(x.a,{item:!0,onClick:this.startCastVoteFor.bind(this)},r.a.createElement(I.a,null),r.a.createElement(f.a,null,"T\xe1")),r.a.createElement(x.a,{item:!0,onClick:this.startCastVoteAgainst.bind(this)},r.a.createElement(S.a,null),r.a.createElement(f.a,null,"N\xedl")))))))}}]),t}(r.a.Component),D=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).billItems=[],a.state={bills:[]},a.props.updateBills().then(function(e){e&&e.map&&(a.billItems=e.map(function(e,t){return r.a.createElement(W,{bill:e,key:t,triggerVoteCast:a.props.triggerVoteCast})}),a.setState(Object(u.a)({},a.state,{bills:e})))}),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(f.a,{variant:"h4",gutterBottom:!0},this.billItems.length," D\xe1il Bills"),r.a.createElement("div",null,r.a.createElement(x.a,{container:!0,direction:"column",spacing:3},this.billItems)))}}]),t}(r.a.Component),_=function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"getDailBills",value:function(){var e=Object(s.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){a(472)(t).then(function(t){e(JSON.parse(t))}).catch(function(e){n(e)})}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"prepareDailBillsRequestUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Current",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2019-05-01",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2019-06-08",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"50",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"en";return"https://api.oireachtas.ie/v1/legislation?bill_status=".concat(e,"&bill_source=Government,Private%20Member&date_start=").concat(t,"&date_end=").concat(a,"&limit=").concat(n,"&chamber_id=").concat(r,"&lang=").concat(o)}}]),e}(),A=a(839),P=a(831),U=a(832),Y=a(840),H=a(833),R=a(834),q=a(835),z=a(836),G=a(837),J=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={inFavour:a.props.inFavour,name:"",email:""},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"setTaNilTab",value:function(){this.setState(Object(u.a)({},this.state,{inFavour:this.props.inFavour}))}},{key:"render",value:function(){var e=this;return this.props.bill?r.a.createElement(A.a,{open:this.props.open,onEnter:this.setTaNilTab.bind(this),onClose:this.props.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(P.a,{id:"form-dialog-title"},this.props.bill.shortTitleEn),r.a.createElement(U.a,null,r.a.createElement(F.a,{square:!0,className:"voteModalTabPaperComponent"},r.a.createElement(Y.a,{value:this.state.inFavour?0:1,onChange:function(t,a){1===a?e.setState(Object(u.a)({},e.state,{inFavour:!1})):e.setState(Object(u.a)({},e.state,{inFavour:!0}))},variant:"fullWidth",indicatorColor:"primary",textColor:"primary"},r.a.createElement(H.a,{icon:r.a.createElement(I.a,null),label:"T\xe1"}),r.a.createElement(H.a,{icon:r.a.createElement(S.a,null),label:"N\xedl"}))),r.a.createElement(R.a,null,"You are going to cast your vote ",r.a.createElement("b",null,this.state.inFavour?"for":"against")," this measure."),r.a.createElement(R.a,null,this.props.bill.longTitleEn)),r.a.createElement(q.a,null,r.a.createElement(z.a,{onClick:this.props.handleClose,color:"primary",variant:"contained"},"Cancel"),r.a.createElement(z.a,{variant:"contained",onClick:function(){e.props.castVote(e.props.bill,e.state.inFavour,e.state.name,e.state.email)},color:"primary"},"Cast Vote",r.a.createElement(G.a,null)))):(M.info("Not rendering without a bill object passed as a prop to CastVoteModal. "),r.a.createElement("div",null))}}]),t}(r.a.Component),L=a(206),K=a.n(L),$=a(350),Q=a(207),X=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={web3:a.getWeb3()},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"getWeb3",value:function(){var e=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(l.a.mark(function e(t,a){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=16;break}return M.info("Window.ethereum provided"),window.web3=new K.a(window.ethereum),e.prev=3,e.next=6,window.ethereum.enable();case 6:(n=e.sent).length>=1&&(window.web3.eth.defaultAccount=n[0]),t(window.web3),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),M.error("Calling window.ethereum.enable() threw an error. Something is probably wrong. ");case 14:e.next=17;break;case 16:window.web3?(M.info("Window.web3 provided"),window.web3=new K.a(window.web3.currentProvider),t(window.web3)):(M.warn("No web3 provider detected"),a("No web3 provider detected"));case 17:case"end":return e.stop()}},e,null,[[3,11]])}));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"getVoteContractAddress",value:function(e){if("rinkeby"===e)return Q.rinkeby.address;if("main"===e)return Q.main.address;throw new Error("Unknown ethereum network name")}},{key:"castVote",value:function(){var e=Object(s.a)(l.a.mark(function e(t,a){var n,r,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.web3;case 2:return n=e.sent,e.next=5,n.eth.net.getNetworkType();case 5:if(r=e.sent,o=this.getVoteContractAddress(r),n.eth.defaultAccount){e.next=9;break}throw new Error("No web3.eth.defaultAccount available. Something went wrong. ");case 9:return e.abrupt("return",new Promise(function(e,r){try{if(n)new n.eth.Contract($,o,{defaultGasPrice:2e10}).methods.vote(t,a).send({from:n.eth.defaultAccount}).then(function(t){e(t)}).catch(function(e){r(e)})}catch(i){M.error("Something went wrong casting a vote. Rejecting with the error. "),r(i)}}));case 10:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"prepareMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Current",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2019-05-01",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2019-06-08",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"50",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"en";return"https://api.oireachtas.ie/v1/legislation?bill_status=".concat(e,"&bill_source=Government,Private%20Member&date_start=").concat(t,"&date_end=").concat(a,"&limit=").concat(n,"&chamber_id=").concat(r,"&lang=").concat(o)}}],[{key:"isWeb3Injected",value:function(){return window.ethereum?(M.info("Window.ethereum provided"),!0):window.web3?(M.info("Window.web3 provided"),!0):(M.warn("No web3 provider detected"),!1)}}]),t}(r.a.Component),Z=C(function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleClose=function(e,t){a.setState(Object(u.a)({},a.state,{castVoteModalOpen:!1}))},a.castVote=function(e,t,n,r){M.info("Casting Vote. BillTitle: ".concat(e.shortTitleEn,", inFavour: ").concat(t,", name:").concat(n,", email: ").concat(r)),new X(null).castVote(e.uri,t).then(function(e){M.info("CastVote() resolved to:  "),console.log(e)}).catch(function(e){M.error("Error thrown getting web3 and sending a vote transaction. "),M.error(e)}),a.setState(Object(u.a)({},a.state,{castVoteModalOpen:!1}))},a.isWeb3User=function(){return X.isWeb3Injected()},a.handleClick=function(){a.setState(Object(u.a)({},a.state,{castVoteModalOpen:!0}))},a.state={castVoteModalOpen:!1,bills:[],billToVoteOn:void 0,inFavour:!1},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"updateBills",value:function(){var e=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var a=new _,n=new Date,r=new Date(n.getTime()-6048e5).toISOString().substring(0,10),o=new Date(n.getTime()+12096e5).toISOString().substring(0,10),i=a.prepareDailBillsRequestUrl("Current",r,o,"50","","ga");e(a.getDailBills(i).then(function(e){return e.results?(M.info("".concat(e.results.length," results returned from api.oireachtas.ie")),e.results.map(function(e){return e.bill})):void M.warn("api.oireachtas.ie returned no results for voting on.")}).catch(function(e){M.error("Error thrown while trying to retrieve bills from the oireachtas api. "),t(e)}))}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"triggerCastVoteModal",value:function(e,t){this.setState(Object(u.a)({},this.state,{castVoteModalOpen:!0,billToVoteOn:e,inFavour:t}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"centerColumn"},r.a.createElement(J,{open:this.state.castVoteModalOpen,handleClose:this.handleClose,bill:this.state.billToVoteOn,inFavour:this.state.inFavour,castVote:this.castVote}),r.a.createElement(x.a,{container:!0,spacing:2},r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(F.a,{className:"paper"},r.a.createElement(f.a,{variant:"h3",gutterBottom:!0},"Have your say on Bills in the Oireachtas"),r.a.createElement(f.a,{variant:"body1",gutterBottom:!0},"Through the use of the"," ",r.a.createElement("a",{href:"https://api.oireachtas.ie/"},"Oireachtas Open Data API"),"; this website allows you to vote on current D\xe1il legislation, and record that vote permanently to the Ethereum Blockchain."),r.a.createElement(f.a,{variant:"body1",gutterBottom:!0},"Citizens vote allows for any citizen to build up a voting record that they ",r.a.createElement("em",null,"cannot")," change. This allows first time candidates for elected office to be compared against incumbent candidates ",r.a.createElement("i",null,"vote for vote"),". How do the two measure up on climate change bills? How do the incumbent and challenger compare on tax bills? Abortion rights? Any contentious bill a voter wants to look at, if the challenger has been commiting their votes to the blockchain, a voter can trust that the candidate could not have changed that vote since the time it was cast. They can now fairly compare how the challenger voted and how the incumbent voted in the D\xe1il. Rather than relying on what candidates say they are going to do during the election cycle."))),this.isWeb3User()?r.a.createElement("div",null):r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(F.a,{className:"paper"},r.a.createElement(T,{web3Injected:this.isWeb3User()}))),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(F.a,{className:"paper"},r.a.createElement(D,{updateBills:this.updateBills,triggerVoteCast:this.triggerCastVoteModal.bind(this)}))),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(F.a,{className:"paper"},r.a.createElement(f.a,{variant:"caption"},"Built by Ois\xedn Kyne. To donate some Ether:"," ",r.a.createElement("a",{href:"https://etherscan.io/address/0xa338096d43efFc151E7e89519b524CA5a7E5626f",target:"_blank",rel:"noopener noreferrer"},"oisinkyne.eth"))))))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[359,1,2]]]);
//# sourceMappingURL=main.ef491de8.chunk.js.map